{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[{"source":"meteor/meteor","imported":["Meteor"],"specifiers":[{"kind":"named","imported":"Meteor","local":"Meteor"}]},{"source":"expect","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"expect"}]},{"source":"./notes","imported":["Notes"],"specifiers":[{"kind":"named","imported":"Notes","local":"Notes"}]}],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"imports/api/notes.test.js","filenameRelative":"imports/api/notes.test.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"imports/api/notes.test.js.map","sourceFileName":"imports/api/notes.test.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"notes.test"},"ignored":false,"code":"var Meteor = void 0;\nmodule.watch(require(\"meteor/meteor\"), {\n  Meteor: function (v) {\n    Meteor = v;\n  }\n}, 0);\nvar expect = void 0;\nmodule.watch(require(\"expect\"), {\n  \"default\": function (v) {\n    expect = v;\n  }\n}, 1);\nvar Notes = void 0;\nmodule.watch(require(\"./notes\"), {\n  Notes: function (v) {\n    Notes = v;\n  }\n}, 2);\n\nif (Meteor.isServer) {\n  describe('notes', function () {\n    var noteOne = {\n      _id: 'testNoteId1',\n      title: 'My Title',\n      body: 'My body for note',\n      updatedAt: 0,\n      userId: 'testUserId1'\n    };\n    var noteTwo = {\n      _id: 'testNoteId2',\n      title: 'Things to Buy',\n      body: 'Couch',\n      updatedAt: 0,\n      userId: 'testUserId2'\n    };\n    beforeEach(function () {\n      Notes.remove({});\n      Notes.insert(noteOne);\n      Notes.insert(noteTwo);\n    });\n    it('should insert new note', function () {\n      var userId = 'testid';\n\n      var _id = Meteor.server.method_handlers['notes.insert'].apply({\n        userId: userId\n      });\n\n      expect(Notes.findOne({\n        _id: _id,\n        userId: userId\n      })).toExist();\n    });\n    it('should not insert note if not authenticated', function () {\n      expect(function () {\n        Meteor.server.method_handlers['notes.insert']();\n      }).toThrow();\n    });\n    it('should remove note', function () {\n      Meteor.server.method_handlers['notes.remove'].apply({\n        userId: noteOne.userId\n      }, [noteOne._id]);\n      expect(Notes.findOne({\n        _id: noteOne._id\n      })).toNotExist();\n    });\n    it('should not remove note if unauthenticated', function () {\n      expect(function () {\n        Meteor.server.method_handlers['notes.remove'].apply({}, [noteOne._id]);\n      }).toThrow();\n    });\n    it('should not remove note if invalid _id', function () {\n      expect(function () {\n        Meteor.server.method_handlers['notes.remove'].apply({\n          userId: noteOne.userId\n        });\n      }).toThrow();\n    });\n    it('should update note', function () {\n      var title = 'This is an updated title';\n      Meteor.server.method_handlers['notes.update'].apply({\n        userId: noteOne.userId\n      }, [noteOne._id, {\n        title: title\n      }]);\n      var note = Notes.findOne(noteOne._id);\n      expect(note.updatedAt).toBeGreaterThan(0);\n      expect(note).toInclude({\n        title: title,\n        body: noteOne.body\n      });\n    });\n    it('should throw error if extra updates provided', function () {\n      expect(function () {\n        Meteor.server.method_handlers['notes.update'].apply({\n          userId: noteOne.userId\n        }, [noteOne._id, {\n          title: 'new title',\n          name: 'Matt'\n        }]);\n      }).toThrow();\n    });\n    it('should not update note if user was not creator', function () {\n      var title = 'This is an updated title';\n      Meteor.server.method_handlers['notes.update'].apply({\n        userId: 'testid'\n      }, [noteOne._id, {\n        title: title\n      }]);\n      var note = Notes.findOne(noteOne._id);\n      expect(note).toInclude(noteOne);\n    });\n    it('should not update note if unauthenticated', function () {\n      expect(function () {\n        Meteor.server.method_handlers['notes.update'].apply({}, [noteOne._id]);\n      }).toThrow();\n    });\n    it('should not update note if invalid _id', function () {\n      expect(function () {\n        Meteor.server.method_handlers['notes.update'].apply({\n          userId: noteOne.userId\n        });\n      }).toThrow();\n    });\n    it('should return a users notes', function () {\n      var res = Meteor.server.publish_handlers.notes.apply({\n        userId: noteOne.userId\n      });\n      var notes = res.fetch();\n      expect(notes.length).toBe(1);\n      expect(notes[0]).toEqual(noteOne);\n    });\n  });\n}","map":{"version":3,"sources":["imports/api/notes.test.js"],"names":["Meteor","module","watch","require","v","expect","Notes","isServer","describe","noteOne","_id","title","body","updatedAt","userId","noteTwo","beforeEach","remove","insert","it","server","method_handlers","apply","findOne","toExist","toThrow","toNotExist","note","toBeGreaterThan","toInclude","name","res","publish_handlers","notes","fetch","length","toBe","toEqual"],"mappings":"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","file":"imports/api/notes.test.js.map","sourcesContent":["import { Meteor } from 'meteor/meteor';\nimport expect from 'expect';\n\nimport { Notes } from './notes';\n\nif (Meteor.isServer) {\n  describe('notes', function () {\n    const noteOne = {\n      _id: 'testNoteId1',\n      title: 'My Title',\n      body: 'My body for note',\n      updatedAt: 0,\n      userId: 'testUserId1'\n    };\n    const noteTwo = {\n      _id: 'testNoteId2',\n      title: 'Things to Buy',\n      body: 'Couch',\n      updatedAt: 0,\n      userId: 'testUserId2'\n    };\n    beforeEach(function () {\n      Notes.remove({});\n      Notes.insert(noteOne);\n      Notes.insert(noteTwo);\n    });\n\n    it('should insert new note', function () {\n      const userId = 'testid';\n      const _id = Meteor.server.method_handlers['notes.insert'].apply({ userId });\n\n      expect(Notes.findOne({ _id, userId })).toExist();\n    });\n\n    it('should not insert note if not authenticated', function () {\n      expect(() => {\n        Meteor.server.method_handlers['notes.insert']();\n      }).toThrow();\n    });\n\n    it('should remove note', function () {\n      Meteor.server.method_handlers['notes.remove'].apply({ userId: noteOne.userId }, [noteOne._id]);\n\n      expect(Notes.findOne({ _id: noteOne._id})).toNotExist();\n    });\n\n    it('should not remove note if unauthenticated', function () {\n      expect(() => {\n        Meteor.server.method_handlers['notes.remove'].apply({}, [noteOne._id]);\n      }).toThrow();\n    });\n\n    it('should not remove note if invalid _id', function () {\n      expect(() => {\n        Meteor.server.method_handlers['notes.remove'].apply({ userId: noteOne.userId });\n      }).toThrow();\n    });\n\n    it('should update note', function () {\n      const title = 'This is an updated title';\n\n      Meteor.server.method_handlers['notes.update'].apply({\n        userId: noteOne.userId\n      }, [\n        noteOne._id,\n        { title }\n      ]);\n\n      const note = Notes.findOne(noteOne._id);\n\n      expect(note.updatedAt).toBeGreaterThan(0);\n      expect(note).toInclude({\n        title,\n        body: noteOne.body\n      });\n    });\n\n    it('should throw error if extra updates provided', function () {\n      expect(() => {\n        Meteor.server.method_handlers['notes.update'].apply({\n          userId: noteOne.userId\n        }, [\n          noteOne._id,\n          { title: 'new title', name: 'Matt'}\n        ]);\n      }).toThrow();\n    });\n\n    it('should not update note if user was not creator', function () {\n      const title = 'This is an updated title';\n\n      Meteor.server.method_handlers['notes.update'].apply({\n        userId: 'testid'\n      }, [\n        noteOne._id,\n        { title }\n      ]);\n\n      const note = Notes.findOne(noteOne._id);\n\n      expect(note).toInclude(noteOne);\n    });\n\n    it('should not update note if unauthenticated', function () {\n      expect(() => {\n        Meteor.server.method_handlers['notes.update'].apply({}, [noteOne._id]);\n      }).toThrow();\n    });\n\n    it('should not update note if invalid _id', function () {\n      expect(() => {\n        Meteor.server.method_handlers['notes.update'].apply({ userId: noteOne.userId });\n      }).toThrow();\n    });\n\n    it('should return a users notes', function () {\n      const res = Meteor.server.publish_handlers.notes.apply({ userId: noteOne.userId });\n      const notes = res.fetch();\n\n      expect(notes.length).toBe(1);\n      expect(notes[0]).toEqual(noteOne);\n    });\n\n\n\n  });\n}\n"]},"hash":"f0d2e67a7bbaa060423de8f7b6f66a93c139988f"}

{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"packages/practicalmeteor:mocha/lib/utils.js","filenameRelative":"packages/practicalmeteor:mocha/lib/utils.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"packages/practicalmeteor:mocha/lib/utils.js.map","sourceFileName":"packages/practicalmeteor:mocha/lib/utils.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"utils"},"ignored":false,"code":"/* eslint-env browser */ /**\n                          * Module dependencies.\n                          */var basename = require('path').basename;\n\nvar debug = require('debug')('mocha:watch');\n\nvar exists = require('fs').existsSync || require('path').existsSync;\n\nvar glob = require('glob');\n\nvar join = require('path').join;\n\nvar readdirSync = require('fs').readdirSync;\n\nvar statSync = require('fs').statSync;\n\nvar watchFile = require('fs').watchFile; /**\n                                          * Ignored directories.\n                                          */\n\nvar ignore = ['node_modules', '.git'];\nexports.inherits = require('util').inherits; /**\n                                              * Escape special characters in the given string of html.\n                                              *\n                                              * @api private\n                                              * @param  {string} html\n                                              * @return {string}\n                                              */\n\nexports.escape = function (html) {\n  return String(html).replace(/&/g, '&amp;').replace(/\"/g, '&quot;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\n}; /**\n    * Array#forEach (<=IE8)\n    *\n    * @api private\n    * @param {Array} arr\n    * @param {Function} fn\n    * @param {Object} scope\n    */\n\nexports.forEach = function (arr, fn, scope) {\n  for (var i = 0, l = arr.length; i < l; i++) {\n    fn.call(scope, arr[i], i);\n  }\n}; /**\n    * Test if the given obj is type of string.\n    *\n    * @api private\n    * @param {Object} obj\n    * @return {boolean}\n    */\n\nexports.isString = function (obj) {\n  return typeof obj === 'string';\n}; /**\n    * Array#map (<=IE8)\n    *\n    * @api private\n    * @param {Array} arr\n    * @param {Function} fn\n    * @param {Object} scope\n    * @return {Array}\n    */\n\nexports.map = function (arr, fn, scope) {\n  var result = [];\n\n  for (var i = 0, l = arr.length; i < l; i++) {\n    result.push(fn.call(scope, arr[i], i, arr));\n  }\n\n  return result;\n}; /**\n    * Array#indexOf (<=IE8)\n    *\n    * @api private\n    * @param {Array} arr\n    * @param {Object} obj to find index of\n    * @param {number} start\n    * @return {number}\n    */\n\nexports.indexOf = function (arr, obj, start) {\n  for (var i = start || 0, l = arr.length; i < l; i++) {\n    if (arr[i] === obj) {\n      return i;\n    }\n  }\n\n  return -1;\n}; /**\n    * Array#reduce (<=IE8)\n    *\n    * @api private\n    * @param {Array} arr\n    * @param {Function} fn\n    * @param {Object} val Initial value.\n    * @return {*}\n    */\n\nexports.reduce = function (arr, fn, val) {\n  var rval = val;\n\n  for (var i = 0, l = arr.length; i < l; i++) {\n    rval = fn(rval, arr[i], i, arr);\n  }\n\n  return rval;\n}; /**\n    * Array#filter (<=IE8)\n    *\n    * @api private\n    * @param {Array} arr\n    * @param {Function} fn\n    * @return {Array}\n    */\n\nexports.filter = function (arr, fn) {\n  var ret = [];\n\n  for (var i = 0, l = arr.length; i < l; i++) {\n    var val = arr[i];\n\n    if (fn(val, i, arr)) {\n      ret.push(val);\n    }\n  }\n\n  return ret;\n}; /**\n    * Object.keys (<=IE8)\n    *\n    * @api private\n    * @param {Object} obj\n    * @return {Array} keys\n    */\n\nexports.keys = typeof Object.keys === 'function' ? Object.keys : function (obj) {\n  var keys = [];\n  var has = Object.prototype.hasOwnProperty; // for `window` on <=IE8\n\n  for (var key in meteorBabelHelpers.sanitizeForInObject(obj)) {\n    if (has.call(obj, key)) {\n      keys.push(key);\n    }\n  }\n\n  return keys;\n}; /**\n    * Watch the given `files` for changes\n    * and invoke `fn(file)` on modification.\n    *\n    * @api private\n    * @param {Array} files\n    * @param {Function} fn\n    */\n\nexports.watch = function (files, fn) {\n  var options = {\n    interval: 100\n  };\n  files.forEach(function (file) {\n    debug('file %s', file);\n    watchFile(file, options, function (curr, prev) {\n      if (prev.mtime < curr.mtime) {\n        fn(file);\n      }\n    });\n  });\n}; /**\n    * Array.isArray (<=IE8)\n    *\n    * @api private\n    * @param {Object} obj\n    * @return {Boolean}\n    */\n\nvar isArray = typeof Array.isArray === 'function' ? Array.isArray : function (obj) {\n  return Object.prototype.toString.call(obj) === '[object Array]';\n};\nexports.isArray = isArray; /**\n                            * Buffer.prototype.toJSON polyfill.\n                            *\n                            * @type {Function}\n                            */\n\nif (typeof Buffer !== 'undefined' && Buffer.prototype) {\n  Buffer.prototype.toJSON = Buffer.prototype.toJSON || function () {\n    return Array.prototype.slice.call(this, 0);\n  };\n} /**\n   * Ignored files.\n   *\n   * @api private\n   * @param {string} path\n   * @return {boolean}\n   */\n\nfunction ignored(path) {\n  return !~ignore.indexOf(path);\n} /**\n   * Lookup files in the given `dir`.\n   *\n   * @api private\n   * @param {string} dir\n   * @param {string[]} [ext=['.js']]\n   * @param {Array} [ret=[]]\n   * @return {Array}\n   */\n\nexports.files = function (dir, ext, ret) {\n  ret = ret || [];\n  ext = ext || ['js'];\n  var re = new RegExp('\\\\.(' + ext.join('|') + ')$');\n  readdirSync(dir).filter(ignored).forEach(function (path) {\n    path = join(dir, path);\n\n    if (statSync(path).isDirectory()) {\n      exports.files(path, ext, ret);\n    } else if (path.match(re)) {\n      ret.push(path);\n    }\n  });\n  return ret;\n}; /**\n    * Compute a slug from the given `str`.\n    *\n    * @api private\n    * @param {string} str\n    * @return {string}\n    */\n\nexports.slug = function (str) {\n  return str.toLowerCase().replace(/ +/g, '-').replace(/[^-\\w]/g, '');\n}; /**\n    * Strip the function definition from `str`, and re-indent for pre whitespace.\n    *\n    * @param {string} str\n    * @return {string}\n    */\n\nexports.clean = function (str) {\n  str = str.replace(/\\r\\n?|[\\n\\u2028\\u2029]/g, '\\n').replace(/^\\uFEFF/, '').replace(/^function *\\(.*\\)\\s*\\{|\\(.*\\) *=> *\\{?/, '').replace(/\\s+\\}$/, '');\n  var spaces = str.match(/^\\n?( *)/)[1].length;\n  var tabs = str.match(/^\\n?(\\t*)/)[1].length;\n  var re = new RegExp('^\\n?' + (tabs ? '\\t' : ' ') + '{' + (tabs ? tabs : spaces) + '}', 'gm');\n  str = str.replace(re, '');\n  return exports.trim(str);\n}; /**\n    * Trim the given `str`.\n    *\n    * @api private\n    * @param {string} str\n    * @return {string}\n    */\n\nexports.trim = function (str) {\n  return str.replace(/^\\s+|\\s+$/g, '');\n}; /**\n    * Parse the given `qs`.\n    *\n    * @api private\n    * @param {string} qs\n    * @return {Object}\n    */\n\nexports.parseQuery = function (qs) {\n  return exports.reduce(qs.replace('?', '').split('&'), function (obj, pair) {\n    var i = pair.indexOf('=');\n    var key = pair.slice(0, i);\n    var val = pair.slice(++i);\n    obj[key] = decodeURIComponent(val);\n    return obj;\n  }, {});\n}; /**\n    * Highlight the given string of `js`.\n    *\n    * @api private\n    * @param {string} js\n    * @return {string}\n    */\n\nfunction highlight(js) {\n  return js.replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\\/\\/(.*)/gm, '<span class=\"comment\">//$1</span>').replace(/('.*?')/gm, '<span class=\"string\">$1</span>').replace(/(\\d+\\.\\d+)/gm, '<span class=\"number\">$1</span>').replace(/(\\d+)/gm, '<span class=\"number\">$1</span>').replace(/\\bnew[ \\t]+(\\w+)/gm, '<span class=\"keyword\">new</span> <span class=\"init\">$1</span>').replace(/\\b(function|new|throw|return|var|if|else)\\b/gm, '<span class=\"keyword\">$1</span>');\n} /**\n   * Highlight the contents of tag `name`.\n   *\n   * @api private\n   * @param {string} name\n   */\n\nexports.highlightTags = function (name) {\n  var code = document.getElementById('mocha').getElementsByTagName(name);\n\n  for (var i = 0, len = code.length; i < len; ++i) {\n    code[i].innerHTML = highlight(code[i].innerHTML);\n  }\n}; /**\n    * If a value could have properties, and has none, this function is called,\n    * which returns a string representation of the empty value.\n    *\n    * Functions w/ no properties return `'[Function]'`\n    * Arrays w/ length === 0 return `'[]'`\n    * Objects w/ no properties return `'{}'`\n    * All else: return result of `value.toString()`\n    *\n    * @api private\n    * @param {*} value The value to inspect.\n    * @param {string} [type] The type of the value, if known.\n    * @returns {string}\n    */\n\nfunction emptyRepresentation(value, type) {\n  type = type || exports.type(value);\n\n  switch (type) {\n    case 'function':\n      return '[Function]';\n\n    case 'object':\n      return '{}';\n\n    case 'array':\n      return '[]';\n\n    default:\n      return value.toString();\n  }\n} /**\n   * Takes some variable and asks `Object.prototype.toString()` what it thinks it\n   * is.\n   *\n   * @api private\n   * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/toString\n   * @param {*} value The value to test.\n   * @returns {string}\n   * @example\n   * type({}) // 'object'\n   * type([]) // 'array'\n   * type(1) // 'number'\n   * type(false) // 'boolean'\n   * type(Infinity) // 'number'\n   * type(null) // 'null'\n   * type(new Date()) // 'date'\n   * type(/foo/) // 'regexp'\n   * type('type') // 'string'\n   * type(global) // 'global'\n   */\n\nexports.type = function () {\n  function type(value) {\n    if (value === undefined) {\n      return 'undefined';\n    } else if (value === null) {\n      return 'null';\n    } else if (typeof Buffer !== 'undefined' && Buffer.isBuffer(value)) {\n      return 'buffer';\n    }\n\n    return Object.prototype.toString.call(value).replace(/^\\[.+\\s(.+?)\\]$/, '$1').toLowerCase();\n  }\n\n  return type;\n}(); /**\n      * Stringify `value`. Different behavior depending on type of value:\n      *\n      * - If `value` is undefined or null, return `'[undefined]'` or `'[null]'`, respectively.\n      * - If `value` is not an object, function or array, return result of `value.toString()` wrapped in double-quotes.\n      * - If `value` is an *empty* object, function, or array, return result of function\n      *   {@link emptyRepresentation}.\n      * - If `value` has properties, call {@link exports.canonicalize} on it, then return result of\n      *   JSON.stringify().\n      *\n      * @api private\n      * @see exports.type\n      * @param {*} value\n      * @return {string}\n      */\n\nexports.stringify = function (value) {\n  var type = exports.type(value);\n\n  if (!~exports.indexOf(['object', 'array', 'function'], type)) {\n    if (type !== 'buffer') {\n      return jsonStringify(value);\n    }\n\n    var json = value.toJSON(); // Based on the toJSON result\n\n    return jsonStringify(json.data && json.type ? json.data : json, 2).replace(/,(\\n|$)/g, '$1');\n  }\n\n  for (var prop in meteorBabelHelpers.sanitizeForInObject(value)) {\n    if (Object.prototype.hasOwnProperty.call(value, prop)) {\n      return jsonStringify(exports.canonicalize(value), 2).replace(/,(\\n|$)/g, '$1');\n    }\n  }\n\n  return emptyRepresentation(value, type);\n}; /**\n    * like JSON.stringify but more sense.\n    *\n    * @api private\n    * @param {Object}  object\n    * @param {number=} spaces\n    * @param {number=} depth\n    * @returns {*}\n    */\n\nfunction jsonStringify(object, spaces, depth) {\n  if (typeof spaces === 'undefined') {\n    // primitive types\n    return _stringify(object);\n  }\n\n  depth = depth || 1;\n  var space = spaces * depth;\n  var str = isArray(object) ? '[' : '{';\n  var end = isArray(object) ? ']' : '}';\n  var length = object.length || exports.keys(object).length; // `.repeat()` polyfill\n\n  function repeat(s, n) {\n    return new Array(n).join(s);\n  }\n\n  function _stringify(val) {\n    switch (exports.type(val)) {\n      case 'null':\n      case 'undefined':\n        val = '[' + val + ']';\n        break;\n\n      case 'array':\n      case 'object':\n        val = jsonStringify(val, spaces, depth + 1);\n        break;\n\n      case 'boolean':\n      case 'regexp':\n      case 'number':\n        val = val === 0 && 1 / val === -Infinity // `-0`\n        ? '-0' : val.toString();\n        break;\n\n      case 'date':\n        var sDate = isNaN(val.getTime()) // Invalid date\n        ? val.toString() : val.toISOString();\n        val = '[Date: ' + sDate + ']';\n        break;\n\n      case 'buffer':\n        var json = val.toJSON(); // Based on the toJSON result\n\n        json = json.data && json.type ? json.data : json;\n        val = '[Buffer: ' + jsonStringify(json, 2, depth + 1) + ']';\n        break;\n\n      default:\n        val = val === '[Function]' || val === '[Circular]' ? val : JSON.stringify(val);\n      // string\n    }\n\n    return val;\n  }\n\n  for (var i in meteorBabelHelpers.sanitizeForInObject(object)) {\n    if (!object.hasOwnProperty(i)) {\n      continue; // not my business\n    }\n\n    --length;\n    str += '\\n ' + repeat(' ', space) + (isArray(object) ? '' : '\"' + i + '\": ') // key\n    + _stringify(object[i]) // value\n    + (length ? ',' : ''); // comma\n  }\n\n  return str // [], {}\n  + (str.length !== 1 ? '\\n' + repeat(' ', --space) + end : end);\n} /**\n   * Test if a value is a buffer.\n   *\n   * @api private\n   * @param {*} value The value to test.\n   * @return {boolean} True if `value` is a buffer, otherwise false\n   */\n\nexports.isBuffer = function (value) {\n  return typeof Buffer !== 'undefined' && Buffer.isBuffer(value);\n}; /**\n    * Return a new Thing that has the keys in sorted order. Recursive.\n    *\n    * If the Thing...\n    * - has already been seen, return string `'[Circular]'`\n    * - is `undefined`, return string `'[undefined]'`\n    * - is `null`, return value `null`\n    * - is some other primitive, return the value\n    * - is not a primitive or an `Array`, `Object`, or `Function`, return the value of the Thing's `toString()` method\n    * - is a non-empty `Array`, `Object`, or `Function`, return the result of calling this function again.\n    * - is an empty `Array`, `Object`, or `Function`, return the result of calling `emptyRepresentation()`\n    *\n    * @api private\n    * @see {@link exports.stringify}\n    * @param {*} value Thing to inspect.  May or may not have properties.\n    * @param {Array} [stack=[]] Stack of seen values\n    * @return {(Object|Array|Function|string|undefined)}\n    */\n\nexports.canonicalize = function (value, stack) {\n  var canonicalizedObj; /* eslint-disable no-unused-vars */\n  var prop; /* eslint-enable no-unused-vars */\n  var type = exports.type(value);\n\n  function withStack(value, fn) {\n    stack.push(value);\n    fn();\n    stack.pop();\n  }\n\n  stack = stack || [];\n\n  if (exports.indexOf(stack, value) !== -1) {\n    return '[Circular]';\n  }\n\n  switch (type) {\n    case 'undefined':\n    case 'buffer':\n    case 'null':\n      canonicalizedObj = value;\n      break;\n\n    case 'array':\n      withStack(value, function () {\n        canonicalizedObj = exports.map(value, function (item) {\n          return exports.canonicalize(item, stack);\n        });\n      });\n      break;\n\n    case 'function':\n      /* eslint-disable guard-for-in */for (prop in meteorBabelHelpers.sanitizeForInObject(value)) {\n        canonicalizedObj = {};\n        break;\n      } /* eslint-enable guard-for-in */\n\n      if (!canonicalizedObj) {\n        canonicalizedObj = emptyRepresentation(value, type);\n        break;\n      }\n\n    /* falls through */\n\n    case 'object':\n      canonicalizedObj = canonicalizedObj || {};\n      withStack(value, function () {\n        exports.forEach(exports.keys(value).sort(), function (key) {\n          canonicalizedObj[key] = exports.canonicalize(value[key], stack);\n        });\n      });\n      break;\n\n    case 'date':\n    case 'number':\n    case 'regexp':\n    case 'boolean':\n      canonicalizedObj = value;\n      break;\n\n    default:\n      canonicalizedObj = value + '';\n  }\n\n  return canonicalizedObj;\n}; /**\n    * Lookup file names at the given `path`.\n    *\n    * @api public\n    * @param {string} path Base path to start searching from.\n    * @param {string[]} extensions File extensions to look for.\n    * @param {boolean} recursive Whether or not to recurse into subdirectories.\n    * @return {string[]} An array of paths.\n    */\n\nexports.lookupFiles = function () {\n  function lookupFiles(path, extensions, recursive) {\n    var files = [];\n    var re = new RegExp('\\\\.(' + extensions.join('|') + ')$');\n\n    if (!exists(path)) {\n      if (exists(path + '.js')) {\n        path += '.js';\n      } else {\n        files = glob.sync(path);\n\n        if (!files.length) {\n          throw new Error(\"cannot resolve path (or pattern) '\" + path + \"'\");\n        }\n\n        return files;\n      }\n    }\n\n    try {\n      var stat = statSync(path);\n\n      if (stat.isFile()) {\n        return path;\n      }\n    } catch (err) {\n      // ignore error\n      return;\n    }\n\n    readdirSync(path).forEach(function (file) {\n      file = join(path, file);\n\n      try {\n        var stat = statSync(file);\n\n        if (stat.isDirectory()) {\n          if (recursive) {\n            files = files.concat(lookupFiles(file, extensions, recursive));\n          }\n\n          return;\n        }\n      } catch (err) {\n        // ignore error\n        return;\n      }\n\n      if (!stat.isFile() || !re.test(file) || basename(file)[0] === '.') {\n        return;\n      }\n\n      files.push(file);\n    });\n    return files;\n  }\n\n  return lookupFiles;\n}(); /**\n      * Generate an undefined error with a message warning the user.\n      *\n      * @return {Error}\n      */\n\nexports.undefinedError = function () {\n  return new Error('Caught undefined error, did you throw without specifying what?');\n}; /**\n    * Generate an undefined error if `err` is not defined.\n    *\n    * @param {Error} err\n    * @return {Error}\n    */\n\nexports.getError = function (err) {\n  return err || exports.undefinedError();\n}; /**\n    * @summary\n    * This Filter based on `mocha-clean` module.(see: `github.com/rstacruz/mocha-clean`)\n    * @description\n    * When invoking this function you get a filter function that get the Error.stack as an input,\n    * and return a prettify output.\n    * (i.e: strip Mocha and internal node functions from stack trace).\n    * @returns {Function}\n    */\n\nexports.stackTraceFilter = function () {\n  // TODO: Replace with `process.browser`\n  var slash = '/';\n  var is = typeof document === 'undefined' ? {\n    node: true\n  } : {\n    browser: true\n  };\n  var cwd = is.node ? process.cwd() + slash : (typeof location === 'undefined' ? window.location : location).href.replace(/\\/[^\\/]*$/, '/');\n\n  function isMochaInternal(line) {\n    return ~line.indexOf('node_modules' + slash + 'mocha' + slash) || ~line.indexOf('components' + slash + 'mochajs' + slash) || ~line.indexOf('components' + slash + 'mocha' + slash) || ~line.indexOf(slash + 'mocha.js');\n  }\n\n  function isNodeInternal(line) {\n    return ~line.indexOf('(timers.js:') || ~line.indexOf('(events.js:') || ~line.indexOf('(node.js:') || ~line.indexOf('(module.js:') || ~line.indexOf('GeneratorFunctionPrototype.next (native)') || false;\n  }\n\n  return function (stack) {\n    stack = stack.split('\\n');\n    stack = exports.reduce(stack, function (list, line) {\n      if (isMochaInternal(line)) {\n        return list;\n      }\n\n      if (is.node && isNodeInternal(line)) {\n        return list;\n      } // Clean up cwd(absolute)\n\n\n      list.push(line.replace(cwd, ''));\n      return list;\n    }, []);\n    return stack.join('\\n');\n  };\n};","map":{"version":3,"sources":["packages/practicalmeteor:mocha/lib/utils.js"],"names":["basename","require","debug","exists","existsSync","glob","join","readdirSync","statSync","watchFile","ignore","exports","inherits","escape","html","String","replace","forEach","arr","fn","scope","i","l","length","call","isString","obj","map","result","push","indexOf","start","reduce","val","rval","filter","ret","keys","Object","has","prototype","hasOwnProperty","key","watch","files","options","interval","file","curr","prev","mtime","isArray","Array","toString","Buffer","toJSON","slice","ignored","path","dir","ext","re","RegExp","isDirectory","match","slug","str","toLowerCase","clean","spaces","tabs","trim","parseQuery","qs","split","pair","decodeURIComponent","highlight","js","highlightTags","name","code","document","getElementById","getElementsByTagName","len","innerHTML","emptyRepresentation","value","type","undefined","isBuffer","stringify","jsonStringify","json","data","prop","canonicalize","object","depth","_stringify","space","end","repeat","s","n","Infinity","sDate","isNaN","getTime","toISOString","JSON","stack","canonicalizedObj","withStack","pop","item","sort","lookupFiles","extensions","recursive","sync","Error","stat","isFile","err","concat","test","undefinedError","getError","stackTraceFilter","slash","is","node","browser","cwd","process","location","window","href","isMochaInternal","line","isNodeInternal","list"],"mappings":"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","file":"packages/practicalmeteor:mocha/lib/utils.js.map","sourcesContent":["/* eslint-env browser */\n\n/**\n * Module dependencies.\n */\n\nvar basename = require('path').basename;\nvar debug = require('debug')('mocha:watch');\nvar exists = require('fs').existsSync || require('path').existsSync;\nvar glob = require('glob');\nvar join = require('path').join;\nvar readdirSync = require('fs').readdirSync;\nvar statSync = require('fs').statSync;\nvar watchFile = require('fs').watchFile;\n\n/**\n * Ignored directories.\n */\n\nvar ignore = ['node_modules', '.git'];\n\nexports.inherits = require('util').inherits;\n\n/**\n * Escape special characters in the given string of html.\n *\n * @api private\n * @param  {string} html\n * @return {string}\n */\nexports.escape = function(html) {\n  return String(html)\n    .replace(/&/g, '&amp;')\n    .replace(/\"/g, '&quot;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;');\n};\n\n/**\n * Array#forEach (<=IE8)\n *\n * @api private\n * @param {Array} arr\n * @param {Function} fn\n * @param {Object} scope\n */\nexports.forEach = function(arr, fn, scope) {\n  for (var i = 0, l = arr.length; i < l; i++) {\n    fn.call(scope, arr[i], i);\n  }\n};\n\n/**\n * Test if the given obj is type of string.\n *\n * @api private\n * @param {Object} obj\n * @return {boolean}\n */\nexports.isString = function(obj) {\n  return typeof obj === 'string';\n};\n\n/**\n * Array#map (<=IE8)\n *\n * @api private\n * @param {Array} arr\n * @param {Function} fn\n * @param {Object} scope\n * @return {Array}\n */\nexports.map = function(arr, fn, scope) {\n  var result = [];\n  for (var i = 0, l = arr.length; i < l; i++) {\n    result.push(fn.call(scope, arr[i], i, arr));\n  }\n  return result;\n};\n\n/**\n * Array#indexOf (<=IE8)\n *\n * @api private\n * @param {Array} arr\n * @param {Object} obj to find index of\n * @param {number} start\n * @return {number}\n */\nexports.indexOf = function(arr, obj, start) {\n  for (var i = start || 0, l = arr.length; i < l; i++) {\n    if (arr[i] === obj) {\n      return i;\n    }\n  }\n  return -1;\n};\n\n/**\n * Array#reduce (<=IE8)\n *\n * @api private\n * @param {Array} arr\n * @param {Function} fn\n * @param {Object} val Initial value.\n * @return {*}\n */\nexports.reduce = function(arr, fn, val) {\n  var rval = val;\n\n  for (var i = 0, l = arr.length; i < l; i++) {\n    rval = fn(rval, arr[i], i, arr);\n  }\n\n  return rval;\n};\n\n/**\n * Array#filter (<=IE8)\n *\n * @api private\n * @param {Array} arr\n * @param {Function} fn\n * @return {Array}\n */\nexports.filter = function(arr, fn) {\n  var ret = [];\n\n  for (var i = 0, l = arr.length; i < l; i++) {\n    var val = arr[i];\n    if (fn(val, i, arr)) {\n      ret.push(val);\n    }\n  }\n\n  return ret;\n};\n\n/**\n * Object.keys (<=IE8)\n *\n * @api private\n * @param {Object} obj\n * @return {Array} keys\n */\nexports.keys = typeof Object.keys === 'function' ? Object.keys : function(obj) {\n  var keys = [];\n  var has = Object.prototype.hasOwnProperty; // for `window` on <=IE8\n\n  for (var key in obj) {\n    if (has.call(obj, key)) {\n      keys.push(key);\n    }\n  }\n\n  return keys;\n};\n\n/**\n * Watch the given `files` for changes\n * and invoke `fn(file)` on modification.\n *\n * @api private\n * @param {Array} files\n * @param {Function} fn\n */\nexports.watch = function(files, fn) {\n  var options = { interval: 100 };\n  files.forEach(function(file) {\n    debug('file %s', file);\n    watchFile(file, options, function(curr, prev) {\n      if (prev.mtime < curr.mtime) {\n        fn(file);\n      }\n    });\n  });\n};\n\n/**\n * Array.isArray (<=IE8)\n *\n * @api private\n * @param {Object} obj\n * @return {Boolean}\n */\nvar isArray = typeof Array.isArray === 'function' ? Array.isArray : function(obj) {\n  return Object.prototype.toString.call(obj) === '[object Array]';\n};\n\nexports.isArray = isArray;\n\n/**\n * Buffer.prototype.toJSON polyfill.\n *\n * @type {Function}\n */\nif (typeof Buffer !== 'undefined' && Buffer.prototype) {\n  Buffer.prototype.toJSON = Buffer.prototype.toJSON || function() {\n    return Array.prototype.slice.call(this, 0);\n  };\n}\n\n/**\n * Ignored files.\n *\n * @api private\n * @param {string} path\n * @return {boolean}\n */\nfunction ignored(path) {\n  return !~ignore.indexOf(path);\n}\n\n/**\n * Lookup files in the given `dir`.\n *\n * @api private\n * @param {string} dir\n * @param {string[]} [ext=['.js']]\n * @param {Array} [ret=[]]\n * @return {Array}\n */\nexports.files = function(dir, ext, ret) {\n  ret = ret || [];\n  ext = ext || ['js'];\n\n  var re = new RegExp('\\\\.(' + ext.join('|') + ')$');\n\n  readdirSync(dir)\n    .filter(ignored)\n    .forEach(function(path) {\n      path = join(dir, path);\n      if (statSync(path).isDirectory()) {\n        exports.files(path, ext, ret);\n      } else if (path.match(re)) {\n        ret.push(path);\n      }\n    });\n\n  return ret;\n};\n\n/**\n * Compute a slug from the given `str`.\n *\n * @api private\n * @param {string} str\n * @return {string}\n */\nexports.slug = function(str) {\n  return str\n    .toLowerCase()\n    .replace(/ +/g, '-')\n    .replace(/[^-\\w]/g, '');\n};\n\n/**\n * Strip the function definition from `str`, and re-indent for pre whitespace.\n *\n * @param {string} str\n * @return {string}\n */\nexports.clean = function(str) {\n  str = str\n    .replace(/\\r\\n?|[\\n\\u2028\\u2029]/g, '\\n').replace(/^\\uFEFF/, '')\n    .replace(/^function *\\(.*\\)\\s*\\{|\\(.*\\) *=> *\\{?/, '')\n    .replace(/\\s+\\}$/, '');\n\n  var spaces = str.match(/^\\n?( *)/)[1].length;\n  var tabs = str.match(/^\\n?(\\t*)/)[1].length;\n  var re = new RegExp('^\\n?' + (tabs ? '\\t' : ' ') + '{' + (tabs ? tabs : spaces) + '}', 'gm');\n\n  str = str.replace(re, '');\n\n  return exports.trim(str);\n};\n\n/**\n * Trim the given `str`.\n *\n * @api private\n * @param {string} str\n * @return {string}\n */\nexports.trim = function(str) {\n  return str.replace(/^\\s+|\\s+$/g, '');\n};\n\n/**\n * Parse the given `qs`.\n *\n * @api private\n * @param {string} qs\n * @return {Object}\n */\nexports.parseQuery = function(qs) {\n  return exports.reduce(qs.replace('?', '').split('&'), function(obj, pair) {\n    var i = pair.indexOf('=');\n    var key = pair.slice(0, i);\n    var val = pair.slice(++i);\n\n    obj[key] = decodeURIComponent(val);\n    return obj;\n  }, {});\n};\n\n/**\n * Highlight the given string of `js`.\n *\n * @api private\n * @param {string} js\n * @return {string}\n */\nfunction highlight(js) {\n  return js\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n    .replace(/\\/\\/(.*)/gm, '<span class=\"comment\">//$1</span>')\n    .replace(/('.*?')/gm, '<span class=\"string\">$1</span>')\n    .replace(/(\\d+\\.\\d+)/gm, '<span class=\"number\">$1</span>')\n    .replace(/(\\d+)/gm, '<span class=\"number\">$1</span>')\n    .replace(/\\bnew[ \\t]+(\\w+)/gm, '<span class=\"keyword\">new</span> <span class=\"init\">$1</span>')\n    .replace(/\\b(function|new|throw|return|var|if|else)\\b/gm, '<span class=\"keyword\">$1</span>');\n}\n\n/**\n * Highlight the contents of tag `name`.\n *\n * @api private\n * @param {string} name\n */\nexports.highlightTags = function(name) {\n  var code = document.getElementById('mocha').getElementsByTagName(name);\n  for (var i = 0, len = code.length; i < len; ++i) {\n    code[i].innerHTML = highlight(code[i].innerHTML);\n  }\n};\n\n/**\n * If a value could have properties, and has none, this function is called,\n * which returns a string representation of the empty value.\n *\n * Functions w/ no properties return `'[Function]'`\n * Arrays w/ length === 0 return `'[]'`\n * Objects w/ no properties return `'{}'`\n * All else: return result of `value.toString()`\n *\n * @api private\n * @param {*} value The value to inspect.\n * @param {string} [type] The type of the value, if known.\n * @returns {string}\n */\nfunction emptyRepresentation(value, type) {\n  type = type || exports.type(value);\n\n  switch (type) {\n    case 'function':\n      return '[Function]';\n    case 'object':\n      return '{}';\n    case 'array':\n      return '[]';\n    default:\n      return value.toString();\n  }\n}\n\n/**\n * Takes some variable and asks `Object.prototype.toString()` what it thinks it\n * is.\n *\n * @api private\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/toString\n * @param {*} value The value to test.\n * @returns {string}\n * @example\n * type({}) // 'object'\n * type([]) // 'array'\n * type(1) // 'number'\n * type(false) // 'boolean'\n * type(Infinity) // 'number'\n * type(null) // 'null'\n * type(new Date()) // 'date'\n * type(/foo/) // 'regexp'\n * type('type') // 'string'\n * type(global) // 'global'\n */\nexports.type = function type(value) {\n  if (value === undefined) {\n    return 'undefined';\n  } else if (value === null) {\n    return 'null';\n  } else if (typeof Buffer !== 'undefined' && Buffer.isBuffer(value)) {\n    return 'buffer';\n  }\n  return Object.prototype.toString.call(value)\n    .replace(/^\\[.+\\s(.+?)\\]$/, '$1')\n    .toLowerCase();\n};\n\n/**\n * Stringify `value`. Different behavior depending on type of value:\n *\n * - If `value` is undefined or null, return `'[undefined]'` or `'[null]'`, respectively.\n * - If `value` is not an object, function or array, return result of `value.toString()` wrapped in double-quotes.\n * - If `value` is an *empty* object, function, or array, return result of function\n *   {@link emptyRepresentation}.\n * - If `value` has properties, call {@link exports.canonicalize} on it, then return result of\n *   JSON.stringify().\n *\n * @api private\n * @see exports.type\n * @param {*} value\n * @return {string}\n */\nexports.stringify = function(value) {\n  var type = exports.type(value);\n\n  if (!~exports.indexOf(['object', 'array', 'function'], type)) {\n    if (type !== 'buffer') {\n      return jsonStringify(value);\n    }\n    var json = value.toJSON();\n    // Based on the toJSON result\n    return jsonStringify(json.data && json.type ? json.data : json, 2)\n      .replace(/,(\\n|$)/g, '$1');\n  }\n\n  for (var prop in value) {\n    if (Object.prototype.hasOwnProperty.call(value, prop)) {\n      return jsonStringify(exports.canonicalize(value), 2).replace(/,(\\n|$)/g, '$1');\n    }\n  }\n\n  return emptyRepresentation(value, type);\n};\n\n/**\n * like JSON.stringify but more sense.\n *\n * @api private\n * @param {Object}  object\n * @param {number=} spaces\n * @param {number=} depth\n * @returns {*}\n */\nfunction jsonStringify(object, spaces, depth) {\n  if (typeof spaces === 'undefined') {\n    // primitive types\n    return _stringify(object);\n  }\n\n  depth = depth || 1;\n  var space = spaces * depth;\n  var str = isArray(object) ? '[' : '{';\n  var end = isArray(object) ? ']' : '}';\n  var length = object.length || exports.keys(object).length;\n  // `.repeat()` polyfill\n  function repeat(s, n) {\n    return new Array(n).join(s);\n  }\n\n  function _stringify(val) {\n    switch (exports.type(val)) {\n      case 'null':\n      case 'undefined':\n        val = '[' + val + ']';\n        break;\n      case 'array':\n      case 'object':\n        val = jsonStringify(val, spaces, depth + 1);\n        break;\n      case 'boolean':\n      case 'regexp':\n      case 'number':\n        val = val === 0 && (1 / val) === -Infinity // `-0`\n          ? '-0'\n          : val.toString();\n        break;\n      case 'date':\n        var sDate = isNaN(val.getTime())        // Invalid date\n          ? val.toString()\n          : val.toISOString();\n        val = '[Date: ' + sDate + ']';\n        break;\n      case 'buffer':\n        var json = val.toJSON();\n        // Based on the toJSON result\n        json = json.data && json.type ? json.data : json;\n        val = '[Buffer: ' + jsonStringify(json, 2, depth + 1) + ']';\n        break;\n      default:\n        val = (val === '[Function]' || val === '[Circular]')\n          ? val\n          : JSON.stringify(val); // string\n    }\n    return val;\n  }\n\n  for (var i in object) {\n    if (!object.hasOwnProperty(i)) {\n      continue; // not my business\n    }\n    --length;\n    str += '\\n ' + repeat(' ', space)\n      + (isArray(object) ? '' : '\"' + i + '\": ') // key\n      + _stringify(object[i])                     // value\n      + (length ? ',' : '');                     // comma\n  }\n\n  return str\n    // [], {}\n    + (str.length !== 1 ? '\\n' + repeat(' ', --space) + end : end);\n}\n\n/**\n * Test if a value is a buffer.\n *\n * @api private\n * @param {*} value The value to test.\n * @return {boolean} True if `value` is a buffer, otherwise false\n */\nexports.isBuffer = function(value) {\n  return typeof Buffer !== 'undefined' && Buffer.isBuffer(value);\n};\n\n/**\n * Return a new Thing that has the keys in sorted order. Recursive.\n *\n * If the Thing...\n * - has already been seen, return string `'[Circular]'`\n * - is `undefined`, return string `'[undefined]'`\n * - is `null`, return value `null`\n * - is some other primitive, return the value\n * - is not a primitive or an `Array`, `Object`, or `Function`, return the value of the Thing's `toString()` method\n * - is a non-empty `Array`, `Object`, or `Function`, return the result of calling this function again.\n * - is an empty `Array`, `Object`, or `Function`, return the result of calling `emptyRepresentation()`\n *\n * @api private\n * @see {@link exports.stringify}\n * @param {*} value Thing to inspect.  May or may not have properties.\n * @param {Array} [stack=[]] Stack of seen values\n * @return {(Object|Array|Function|string|undefined)}\n */\nexports.canonicalize = function(value, stack) {\n  var canonicalizedObj;\n  /* eslint-disable no-unused-vars */\n  var prop;\n  /* eslint-enable no-unused-vars */\n  var type = exports.type(value);\n  function withStack(value, fn) {\n    stack.push(value);\n    fn();\n    stack.pop();\n  }\n\n  stack = stack || [];\n\n  if (exports.indexOf(stack, value) !== -1) {\n    return '[Circular]';\n  }\n\n  switch (type) {\n    case 'undefined':\n    case 'buffer':\n    case 'null':\n      canonicalizedObj = value;\n      break;\n    case 'array':\n      withStack(value, function() {\n        canonicalizedObj = exports.map(value, function(item) {\n          return exports.canonicalize(item, stack);\n        });\n      });\n      break;\n    case 'function':\n      /* eslint-disable guard-for-in */\n      for (prop in value) {\n        canonicalizedObj = {};\n        break;\n      }\n      /* eslint-enable guard-for-in */\n      if (!canonicalizedObj) {\n        canonicalizedObj = emptyRepresentation(value, type);\n        break;\n      }\n    /* falls through */\n    case 'object':\n      canonicalizedObj = canonicalizedObj || {};\n      withStack(value, function() {\n        exports.forEach(exports.keys(value).sort(), function(key) {\n          canonicalizedObj[key] = exports.canonicalize(value[key], stack);\n        });\n      });\n      break;\n    case 'date':\n    case 'number':\n    case 'regexp':\n    case 'boolean':\n      canonicalizedObj = value;\n      break;\n    default:\n      canonicalizedObj = value + '';\n  }\n\n  return canonicalizedObj;\n};\n\n/**\n * Lookup file names at the given `path`.\n *\n * @api public\n * @param {string} path Base path to start searching from.\n * @param {string[]} extensions File extensions to look for.\n * @param {boolean} recursive Whether or not to recurse into subdirectories.\n * @return {string[]} An array of paths.\n */\nexports.lookupFiles = function lookupFiles(path, extensions, recursive) {\n  var files = [];\n  var re = new RegExp('\\\\.(' + extensions.join('|') + ')$');\n\n  if (!exists(path)) {\n    if (exists(path + '.js')) {\n      path += '.js';\n    } else {\n      files = glob.sync(path);\n      if (!files.length) {\n        throw new Error(\"cannot resolve path (or pattern) '\" + path + \"'\");\n      }\n      return files;\n    }\n  }\n\n  try {\n    var stat = statSync(path);\n    if (stat.isFile()) {\n      return path;\n    }\n  } catch (err) {\n    // ignore error\n    return;\n  }\n\n  readdirSync(path).forEach(function(file) {\n    file = join(path, file);\n    try {\n      var stat = statSync(file);\n      if (stat.isDirectory()) {\n        if (recursive) {\n          files = files.concat(lookupFiles(file, extensions, recursive));\n        }\n        return;\n      }\n    } catch (err) {\n      // ignore error\n      return;\n    }\n    if (!stat.isFile() || !re.test(file) || basename(file)[0] === '.') {\n      return;\n    }\n    files.push(file);\n  });\n\n  return files;\n};\n\n/**\n * Generate an undefined error with a message warning the user.\n *\n * @return {Error}\n */\n\nexports.undefinedError = function() {\n  return new Error('Caught undefined error, did you throw without specifying what?');\n};\n\n/**\n * Generate an undefined error if `err` is not defined.\n *\n * @param {Error} err\n * @return {Error}\n */\n\nexports.getError = function(err) {\n  return err || exports.undefinedError();\n};\n\n/**\n * @summary\n * This Filter based on `mocha-clean` module.(see: `github.com/rstacruz/mocha-clean`)\n * @description\n * When invoking this function you get a filter function that get the Error.stack as an input,\n * and return a prettify output.\n * (i.e: strip Mocha and internal node functions from stack trace).\n * @returns {Function}\n */\nexports.stackTraceFilter = function() {\n  // TODO: Replace with `process.browser`\n  var slash = '/';\n  var is = typeof document === 'undefined' ? { node: true } : { browser: true };\n  var cwd = is.node\n      ? process.cwd() + slash\n      : (typeof location === 'undefined' ? window.location : location).href.replace(/\\/[^\\/]*$/, '/');\n\n  function isMochaInternal(line) {\n    return (~line.indexOf('node_modules' + slash + 'mocha' + slash))\n      || (~line.indexOf('components' + slash + 'mochajs' + slash))\n      || (~line.indexOf('components' + slash + 'mocha' + slash))\n      || (~line.indexOf(slash + 'mocha.js'));\n  }\n\n  function isNodeInternal(line) {\n    return (~line.indexOf('(timers.js:'))\n      || (~line.indexOf('(events.js:'))\n      || (~line.indexOf('(node.js:'))\n      || (~line.indexOf('(module.js:'))\n      || (~line.indexOf('GeneratorFunctionPrototype.next (native)'))\n      || false;\n  }\n\n  return function(stack) {\n    stack = stack.split('\\n');\n\n    stack = exports.reduce(stack, function(list, line) {\n      if (isMochaInternal(line)) {\n        return list;\n      }\n\n      if (is.node && isNodeInternal(line)) {\n        return list;\n      }\n\n      // Clean up cwd(absolute)\n      list.push(line.replace(cwd, ''));\n      return list;\n    }, []);\n\n    return stack.join('\\n');\n  };\n};\n"]},"hash":"6767336f7b5d7b8a66fb415c97bfa32baa42113d"}

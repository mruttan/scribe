{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"packages/practicalmeteor:mocha/support/browser-entry.js","filenameRelative":"packages/practicalmeteor:mocha/support/browser-entry.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"packages/practicalmeteor:mocha/support/browser-entry.js.map","sourceFileName":"packages/practicalmeteor:mocha/support/browser-entry.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"browser-entry"},"ignored":false,"code":"/**\n * Shim process.stdout.\n */process.stdout = require('browser-stdout')();\n\nvar Mocha = require('../'); /**\n                             * Create a Mocha instance.\n                             *\n                             * @return {undefined}\n                             */\n\nvar mocha = new Mocha({\n  reporter: 'html'\n}); /**\n     * Save timer references to avoid Sinon interfering (see GH-237).\n     */\nvar Date = global.Date;\nvar setTimeout = global.setTimeout;\nvar setInterval = global.setInterval;\nvar clearTimeout = global.clearTimeout;\nvar clearInterval = global.clearInterval;\nvar uncaughtExceptionHandlers = [];\nvar originalOnerrorHandler = global.onerror; /**\n                                              * Remove uncaughtException listener.\n                                              * Revert to original onerror handler if previously defined.\n                                              */\n\nprocess.removeListener = function (e, fn) {\n  if ('uncaughtException' == e) {\n    if (originalOnerrorHandler) {\n      global.onerror = originalOnerrorHandler;\n    } else {\n      global.onerror = function () {};\n    }\n\n    var i = Mocha.utils.indexOf(uncaughtExceptionHandlers, fn);\n\n    if (i != -1) {\n      uncaughtExceptionHandlers.splice(i, 1);\n    }\n  }\n}; /**\n    * Implements uncaughtException listener.\n    */\n\nprocess.on = function (e, fn) {\n  if ('uncaughtException' == e) {\n    global.onerror = function (err, url, line) {\n      fn(new Error(err + ' (' + url + ':' + line + ')'));\n      return !mocha.allowUncaught;\n    };\n\n    uncaughtExceptionHandlers.push(fn);\n  }\n}; // The BDD UI is registered by default, but no UI will be functional in the\n// browser without an explicit call to the overridden `mocha.ui` (see below).\n// Ensure that this default UI does not expose its methods to the global scope.\n\n\nmocha.suite.removeAllListeners('pre-require');\nvar immediateQueue = [],\n    immediateTimeout;\n\nfunction timeslice() {\n  var immediateStart = new Date().getTime();\n\n  while (immediateQueue.length && new Date().getTime() - immediateStart < 100) {\n    immediateQueue.shift()();\n  }\n\n  if (immediateQueue.length) {\n    immediateTimeout = setTimeout(timeslice, 0);\n  } else {\n    immediateTimeout = null;\n  }\n} /**\n   * High-performance override of Runner.immediately.\n   */\n\nMocha.Runner.immediately = function (callback) {\n  immediateQueue.push(callback);\n\n  if (!immediateTimeout) {\n    immediateTimeout = setTimeout(timeslice, 0);\n  }\n}; /**\n    * Function to allow assertion libraries to throw errors directly into mocha.\n    * This is useful when running tests in a browser because window.onerror will\n    * only receive the 'message' attribute of the Error.\n    */\n\nmocha.throwError = function (err) {\n  Mocha.utils.forEach(uncaughtExceptionHandlers, function (fn) {\n    fn(err);\n  });\n  throw err;\n}; /**\n    * Override ui to ensure that the ui functions are initialized.\n    * Normally this would happen in Mocha.prototype.loadFiles.\n    */\n\nmocha.ui = function (ui) {\n  Mocha.prototype.ui.call(this, ui);\n  this.suite.emit('pre-require', global, null, this);\n  return this;\n}; /**\n    * Setup mocha with the given setting options.\n    */\n\nmocha.setup = function (opts) {\n  if ('string' == typeof opts) opts = {\n    ui: opts\n  };\n\n  for (var opt in meteorBabelHelpers.sanitizeForInObject(opts)) {\n    this[opt](opts[opt]);\n  }\n\n  return this;\n}; /**\n    * Run mocha, returning the Runner.\n    */\n\nmocha.run = function (fn) {\n  var options = mocha.options;\n  mocha.globals('location');\n  var query = Mocha.utils.parseQuery(global.location.search || '');\n  if (query.grep) mocha.grep(new RegExp(query.grep));\n  if (query.fgrep) mocha.grep(query.fgrep);\n  if (query.invert) mocha.invert();\n  return Mocha.prototype.run.call(mocha, function (err) {\n    // The DOM Document is not available in Web Workers.\n    var document = global.document;\n\n    if (document && document.getElementById('mocha') && options.noHighlighting !== true) {\n      Mocha.utils.highlightTags('code');\n    }\n\n    if (fn) fn(err);\n  });\n}; /**\n    * Expose the process shim.\n    * https://github.com/mochajs/mocha/pull/916\n    */\n\nMocha.process = process; /**\n                          * Expose mocha.\n                          */\nglobal.Mocha = Mocha;\nglobal.mocha = mocha;","map":{"version":3,"sources":["packages/practicalmeteor:mocha/support/browser-entry.js"],"names":["process","stdout","require","Mocha","mocha","reporter","Date","global","setTimeout","setInterval","clearTimeout","clearInterval","uncaughtExceptionHandlers","originalOnerrorHandler","onerror","removeListener","e","fn","i","utils","indexOf","splice","on","err","url","line","Error","allowUncaught","push","suite","removeAllListeners","immediateQueue","immediateTimeout","timeslice","immediateStart","getTime","length","shift","Runner","immediately","callback","throwError","forEach","ui","prototype","call","emit","setup","opts","opt","run","options","globals","query","parseQuery","location","search","grep","RegExp","fgrep","invert","document","getElementById","noHighlighting","highlightTags"],"mappings":"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","file":"packages/practicalmeteor:mocha/support/browser-entry.js.map","sourcesContent":["/**\n * Shim process.stdout.\n */\n\nprocess.stdout = require('browser-stdout')();\n\nvar Mocha = require('../');\n\n/**\n * Create a Mocha instance.\n *\n * @return {undefined}\n */\n\nvar mocha = new Mocha({ reporter: 'html' });\n\n/**\n * Save timer references to avoid Sinon interfering (see GH-237).\n */\n\nvar Date = global.Date;\nvar setTimeout = global.setTimeout;\nvar setInterval = global.setInterval;\nvar clearTimeout = global.clearTimeout;\nvar clearInterval = global.clearInterval;\n\nvar uncaughtExceptionHandlers = [];\n\nvar originalOnerrorHandler = global.onerror;\n\n/**\n * Remove uncaughtException listener.\n * Revert to original onerror handler if previously defined.\n */\n\nprocess.removeListener = function(e, fn){\n  if ('uncaughtException' == e) {\n    if (originalOnerrorHandler) {\n      global.onerror = originalOnerrorHandler;\n    } else {\n      global.onerror = function() {};\n    }\n    var i = Mocha.utils.indexOf(uncaughtExceptionHandlers, fn);\n    if (i != -1) { uncaughtExceptionHandlers.splice(i, 1); }\n  }\n};\n\n/**\n * Implements uncaughtException listener.\n */\n\nprocess.on = function(e, fn){\n  if ('uncaughtException' == e) {\n    global.onerror = function(err, url, line){\n      fn(new Error(err + ' (' + url + ':' + line + ')'));\n      return !mocha.allowUncaught;\n    };\n    uncaughtExceptionHandlers.push(fn);\n  }\n};\n\n// The BDD UI is registered by default, but no UI will be functional in the\n// browser without an explicit call to the overridden `mocha.ui` (see below).\n// Ensure that this default UI does not expose its methods to the global scope.\nmocha.suite.removeAllListeners('pre-require');\n\nvar immediateQueue = []\n  , immediateTimeout;\n\nfunction timeslice() {\n  var immediateStart = new Date().getTime();\n  while (immediateQueue.length && (new Date().getTime() - immediateStart) < 100) {\n    immediateQueue.shift()();\n  }\n  if (immediateQueue.length) {\n    immediateTimeout = setTimeout(timeslice, 0);\n  } else {\n    immediateTimeout = null;\n  }\n}\n\n/**\n * High-performance override of Runner.immediately.\n */\n\nMocha.Runner.immediately = function(callback) {\n  immediateQueue.push(callback);\n  if (!immediateTimeout) {\n    immediateTimeout = setTimeout(timeslice, 0);\n  }\n};\n\n/**\n * Function to allow assertion libraries to throw errors directly into mocha.\n * This is useful when running tests in a browser because window.onerror will\n * only receive the 'message' attribute of the Error.\n */\nmocha.throwError = function(err) {\n  Mocha.utils.forEach(uncaughtExceptionHandlers, function (fn) {\n    fn(err);\n  });\n  throw err;\n};\n\n/**\n * Override ui to ensure that the ui functions are initialized.\n * Normally this would happen in Mocha.prototype.loadFiles.\n */\n\nmocha.ui = function(ui){\n  Mocha.prototype.ui.call(this, ui);\n  this.suite.emit('pre-require', global, null, this);\n  return this;\n};\n\n/**\n * Setup mocha with the given setting options.\n */\n\nmocha.setup = function(opts){\n  if ('string' == typeof opts) opts = { ui: opts };\n  for (var opt in opts) this[opt](opts[opt]);\n  return this;\n};\n\n/**\n * Run mocha, returning the Runner.\n */\n\nmocha.run = function(fn){\n  var options = mocha.options;\n  mocha.globals('location');\n\n  var query = Mocha.utils.parseQuery(global.location.search || '');\n  if (query.grep) mocha.grep(new RegExp(query.grep));\n  if (query.fgrep) mocha.grep(query.fgrep);\n  if (query.invert) mocha.invert();\n\n  return Mocha.prototype.run.call(mocha, function(err){\n    // The DOM Document is not available in Web Workers.\n    var document = global.document;\n    if (document && document.getElementById('mocha') && options.noHighlighting !== true) {\n      Mocha.utils.highlightTags('code');\n    }\n    if (fn) fn(err);\n  });\n};\n\n/**\n * Expose the process shim.\n * https://github.com/mochajs/mocha/pull/916\n */\n\nMocha.process = process;\n\n/**\n * Expose mocha.\n */\n\nglobal.Mocha = Mocha;\nglobal.mocha = mocha;\n"]},"hash":"db988094c438c346bf562c0c78b40ddfb02b4d06"}

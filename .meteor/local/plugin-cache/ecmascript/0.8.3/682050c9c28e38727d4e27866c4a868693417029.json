{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"packages/practicalmeteor:mocha/test/acceptance/utils.js","filenameRelative":"packages/practicalmeteor:mocha/test/acceptance/utils.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"packages/practicalmeteor:mocha/test/acceptance/utils.js.map","sourceFileName":"packages/practicalmeteor:mocha/test/acceptance/utils.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"utils"},"ignored":false,"code":"var utils = require('../../lib/utils');\n\ndescribe('lib/utils', function () {\n  describe('clean', function () {\n    it(\"should format a single line test function\", function () {\n      var fn = [\"function () {\", \"  var a = 1;\", \"}\"].join(\"\\n\");\n      utils.clean(fn).should.equal(\"var a = 1;\");\n    });\n    it(\"should format a multi line test indented with spaces\", function () {\n      // and no new lines after curly braces, shouldn't matter\n      var fn = [\"function(){  var a = 1;\", \"    var b = 2;\" // this one has more spaces\n      , \"  var c = 3;  }\"].join(\"\\n\");\n      utils.clean(fn).should.equal(\"var a = 1;\\n  var b = 2;\\nvar c = 3;\");\n    });\n    it(\"should format a multi line test indented with tabs\", function () {\n      var fn = [\"function (arg1, arg2)   {\", \"\\tif (true) {\", \"\\t\\tvar a = 1;\", \"\\t}\", \"}\"].join(\"\\n\");\n      utils.clean(fn).should.equal(\"if (true) {\\n\\tvar a = 1;\\n}\");\n    });\n    it(\"should format functions saved in windows style - spaces\", function () {\n      var fn = [\"function (one) {\", \"   do {\", '    \"nothing\";', \"   } while (false);\", ' }'].join(\"\\r\\n\");\n      utils.clean(fn).should.equal('do {\\n \"nothing\";\\n} while (false);');\n    });\n    it(\"should format functions saved in windows style - tabs\", function () {\n      var fn = [\"function ( )   {\", \"\\tif (false) {\", \"\\t\\tvar json = {\", '\\t\\t\\tone : 1', '\\t\\t};', \"\\t}\", \"}\"].join(\"\\r\\n\");\n      utils.clean(fn).should.equal(\"if (false) {\\n\\tvar json = {\\n\\t\\tone : 1\\n\\t};\\n}\");\n    });\n    it(\"should format es6 arrow functions\", function () {\n      var fn = [\"() => {\", \"  var a = 1;\", \"}\"].join(\"\\n\");\n      utils.clean(fn).should.equal(\"var a = 1;\");\n    });\n    it(\"should format es6 arrow functions with implicit return\", function () {\n      var fn = \"() => foo()\";\n      utils.clean(fn).should.equal(\"foo()\");\n    });\n  });\n  describe('stringify', function () {\n    var stringify = utils.stringify;\n    it('should return Buffer with .toJSON representation', function () {\n      stringify(new Buffer([0x01])).should.equal('[\\n  1\\n]');\n      stringify(new Buffer([0x01, 0x02])).should.equal('[\\n  1\\n  2\\n]');\n      stringify(new Buffer('ABCD')).should.equal('[\\n  65\\n  66\\n  67\\n  68\\n]');\n    });\n    it('should return Date object with .toISOString() + string prefix', function () {\n      stringify(new Date(0)).should.equal('[Date: ' + new Date(0).toISOString() + ']');\n      var date = new Date(); // now\n\n      stringify(date).should.equal('[Date: ' + date.toISOString() + ']');\n    });\n    it('should return invalid Date object with .toString() + string prefix', function () {\n      stringify(new Date('')).should.equal('[Date: ' + new Date('').toString() + ']');\n    });\n    describe('#Number', function () {\n      it('should show the handle -0 situations', function () {\n        stringify(-0).should.eql('-0');\n        stringify(0).should.eql('0');\n        stringify('-0').should.eql('\"-0\"');\n      });\n      it('should work well with `NaN` and `Infinity`', function () {\n        stringify(NaN).should.equal('NaN');\n        stringify(Infinity).should.equal('Infinity');\n        stringify(-Infinity).should.equal('-Infinity');\n      });\n      it('floats and ints', function () {\n        stringify(1).should.equal('1');\n        stringify(1.2).should.equal('1.2');\n        stringify(1e9).should.equal('1000000000');\n      });\n    });\n    describe('canonicalize example', function () {\n      it('should represent the actual full result', function () {\n        var expected = {\n          str: 'string',\n          int: 90,\n          float: 9.99,\n          boolean: false,\n          nil: null,\n          undef: undefined,\n          regex: /^[a-z|A-Z]/,\n          date: new Date(0),\n          func: function () {},\n          infi: Infinity,\n          nan: NaN,\n          zero: -0,\n          buffer: new Buffer([0x01, 0x02]),\n          array: [1, 2, 3],\n          empArr: [],\n          matrix: [[1], [2, 3, 4]],\n          object: {\n            a: 1,\n            b: 2\n          },\n          canObj: {\n            a: {\n              b: 1,\n              c: 2\n            },\n            b: {}\n          },\n          empObj: {}\n        };\n        expected.circular = expected; // Make `Circular` situation\n\n        var actual = ['{', '  \"array\": [', '    1', '    2', '    3', '  ]', '  \"boolean\": false', '  \"buffer\": [Buffer: [', '    1', '    2', '  ]]', '  \"canObj\": {', '    \"a\": {', '      \"b\": 1', '      \"c\": 2', '    }', '    \"b\": {}', '  }', '  \"circular\": [Circular]', '  \"date\": [Date: 1970-01-01T00:00:00.000Z]', '  \"empArr\": []', '  \"empObj\": {}', '  \"float\": 9.99', '  \"func\": [Function]', '  \"infi\": Infinity', '  \"int\": 90', '  \"matrix\": [', '    [', '      1', '    ]', '    [', '      2', '      3', '      4', '    ]', '  ]', '  \"nan\": NaN', '  \"nil\": [null]', '  \"object\": {', '    \"a\": 1', '    \"b\": 2', '  }', '  \"regex\": /^[a-z|A-Z]/', '  \"str\": \"string\"', '  \"undef\": [undefined]', '  \"zero\": -0', '}'].join('\\n');\n        stringify(expected).should.equal(actual);\n      });\n    });\n    it('should canonicalize the object', function () {\n      var travis = {\n        name: 'travis',\n        age: 24\n      };\n      var travis2 = {\n        age: 24,\n        name: 'travis'\n      };\n      stringify(travis).should.equal(stringify(travis2));\n    });\n    it('should handle circular structures in objects', function () {\n      var travis = {\n        name: 'travis'\n      };\n      travis.whoami = travis;\n      stringify(travis).should.equal('{\\n  \"name\": \"travis\"\\n  \"whoami\": [Circular]\\n}');\n    });\n    it('should handle circular structures in arrays', function () {\n      var travis = ['travis'];\n      travis.push(travis);\n      stringify(travis).should.equal('[\\n  \"travis\"\\n  [Circular]\\n]');\n    });\n    it('should handle circular structures in functions', function () {\n      var travis = function () {};\n\n      travis.fn = travis;\n      stringify(travis).should.equal('{\\n  \"fn\": [Circular]\\n}');\n    });\n    it('should handle various non-undefined, non-null, non-object, non-array, non-date, and non-function values', function () {\n      var regexp = new RegExp(\"(?:)\"),\n          regExpObj = {\n        regexp: regexp\n      },\n          regexpString = '/(?:)/';\n      stringify(regExpObj).should.equal('{\\n  \"regexp\": ' + regexpString + '\\n}');\n      stringify(regexp).should.equal(regexpString);\n      var number = 1,\n          numberObj = {\n        number: number\n      },\n          numberString = '1';\n      stringify(numberObj).should.equal('{\\n  \"number\": ' + number + '\\n}');\n      stringify(number).should.equal(numberString);\n      var boolean = false,\n          booleanObj = {\n        boolean: boolean\n      },\n          booleanString = 'false';\n      stringify(booleanObj).should.equal('{\\n  \"boolean\": ' + boolean + '\\n}');\n      stringify(boolean).should.equal(booleanString);\n      var string = 'sneepy',\n          stringObj = {\n        string: string\n      };\n      stringify(stringObj).should.equal('{\\n  \"string\": \"' + string + '\"\\n}');\n      stringify(string).should.equal(JSON.stringify(string));\n      var nullValue = null,\n          nullObj = {\n        'null': null\n      },\n          nullString = '[null]';\n      stringify(nullObj).should.equal('{\\n  \"null\": [null]\\n}');\n      stringify(nullValue).should.equal(nullString);\n    });\n    it('should handle arrays', function () {\n      var array = ['dave', 'dave', 'dave', 'dave'],\n          arrayObj = {\n        array: array\n      },\n          arrayString = array.map(function () {\n        return '    \"dave\"';\n      }).join('\\n');\n      stringify(arrayObj).should.equal('{\\n  \"array\": [\\n' + arrayString + '\\n  ]\\n}');\n      stringify(array).should.equal('[' + arrayString.replace(/\\s+/g, '\\n  ') + '\\n]');\n    });\n    it('should handle functions', function () {\n      var fn = function () {},\n          fnObj = {\n        fn: fn\n      },\n          fnString = '[Function]';\n\n      stringify(fnObj).should.equal('{\\n  \"fn\": ' + fnString + '\\n}');\n      stringify(fn).should.equal('[Function]');\n    });\n    it('should handle empty objects', function () {\n      stringify({}).should.equal('{}');\n      stringify({\n        foo: {}\n      }).should.equal('{\\n  \"foo\": {}\\n}');\n    });\n    it('should handle empty arrays', function () {\n      stringify([]).should.equal('[]');\n      stringify({\n        foo: []\n      }).should.equal('{\\n  \"foo\": []\\n}');\n    });\n    it('should handle non-empty arrays', function () {\n      stringify(['a', 'b', 'c']).should.equal('[\\n  \"a\"\\n  \"b\"\\n  \"c\"\\n]');\n    });\n    it('should handle empty functions (with no properties)', function () {\n      stringify(function () {}).should.equal('[Function]');\n      stringify({\n        foo: function () {}\n      }).should.equal('{\\n  \"foo\": [Function]\\n}');\n      stringify({\n        foo: function () {},\n        bar: 'baz'\n      }).should.equal('{\\n  \"bar\": \"baz\"\\n  \"foo\": [Function]\\n}');\n    });\n    it('should handle functions w/ properties', function () {\n      var fn = function () {};\n\n      fn.bar = 'baz';\n      stringify(fn).should.equal('{\\n  \"bar\": \"baz\"\\n}');\n      stringify({\n        foo: fn\n      }).should.equal('{\\n  \"foo\": {\\n    \"bar\": \"baz\"\\n  }\\n}');\n    });\n    it('should handle undefined values', function () {\n      stringify({\n        foo: undefined\n      }).should.equal('{\\n  \"foo\": [undefined]\\n}');\n      stringify({\n        foo: 'bar',\n        baz: undefined\n      }).should.equal('{\\n  \"baz\": [undefined]\\n  \"foo\": \"bar\"\\n}');\n      stringify().should.equal('[undefined]');\n    });\n    it('should recurse', function () {\n      stringify({\n        foo: {\n          bar: {\n            baz: {\n              quux: {\n                herp: 'derp'\n              }\n            }\n          }\n        }\n      }).should.equal('{\\n  \"foo\": {\\n    \"bar\": {\\n      \"baz\": {\\n        \"quux\": {\\n          \"herp\": \"derp\"\\n        }\\n      }\\n    }\\n  }\\n}');\n    });\n    it('might get confusing', function () {\n      stringify(null).should.equal('[null]');\n    });\n    it('should not freak out if it sees a primitive twice', function () {\n      stringify({\n        foo: null,\n        bar: null\n      }).should.equal('{\\n  \"bar\": [null]\\n  \"foo\": [null]\\n}');\n      stringify({\n        foo: 1,\n        bar: 1\n      }).should.equal('{\\n  \"bar\": 1\\n  \"foo\": 1\\n}');\n    });\n    it('should stringify dates', function () {\n      var date = new Date(0);\n      stringify(date).should.equal('[Date: 1970-01-01T00:00:00.000Z]');\n      stringify({\n        date: date\n      }).should.equal('{\\n  \"date\": [Date: 1970-01-01T00:00:00.000Z]\\n}');\n    });\n    it('should handle object without an Object prototype', function () {\n      var a = Object.create(null);\n      a.foo = 1;\n      stringify(a).should.equal('{\\n  \"foo\": 1\\n}');\n    });\n  });\n  describe('type', function () {\n    var type = utils.type;\n    it('should recognize various types', function () {\n      type({}).should.equal('object');\n      type([]).should.equal('array');\n      type(1).should.equal('number');\n      type(Infinity).should.equal('number');\n      type(null).should.equal('null');\n      type(undefined).should.equal('undefined');\n      type(new Date()).should.equal('date');\n      type(/foo/).should.equal('regexp');\n      type('type').should.equal('string');\n      type(global).should.equal('global');\n      type(true).should.equal('boolean');\n    });\n    describe('when toString on null or undefined stringifies window', function () {\n      var toString = Object.prototype.toString;\n      beforeEach(function () {\n        // some JS engines such as PhantomJS 1.x exhibit this behavior\n        Object.prototype.toString = function () {\n          return '[object DOMWindow]';\n        };\n      });\n      it('should recognize null and undefined', function () {\n        type(null).should.equal('null');\n        type(undefined).should.equal('undefined');\n      });\n      afterEach(function () {\n        Object.prototype.toString = toString;\n      });\n    });\n  });\n  describe('lookupFiles', function () {\n    var fs = require('fs'),\n        path = require('path'),\n        existsSync = fs.existsSync || path.existsSync;\n\n    beforeEach(function () {\n      fs.writeFileSync('/tmp/mocha-utils.js', 'yippy skippy ying yang yow');\n      fs.symlinkSync('/tmp/mocha-utils.js', '/tmp/mocha-utils-link.js');\n    });\n    it('should not choke on symlinks', function () {\n      utils.lookupFiles('/tmp', ['js'], false).should.containEql('/tmp/mocha-utils-link.js').and.containEql('/tmp/mocha-utils.js').and.have.lengthOf(2);\n      existsSync('/tmp/mocha-utils-link.js').should.be.true();\n      fs.renameSync('/tmp/mocha-utils.js', '/tmp/bob');\n      existsSync('/tmp/mocha-utils-link.js').should.be.false();\n      utils.lookupFiles('/tmp', ['js'], false).should.eql([]);\n    });\n    afterEach(function () {\n      ['/tmp/mocha-utils.js', '/tmp/mocha-utils-link.js', '/tmp/bob'].forEach(function (path) {\n        try {\n          fs.unlinkSync(path);\n        } catch (ignored) {}\n      });\n    });\n  });\n});","map":{"version":3,"sources":["packages/practicalmeteor:mocha/test/acceptance/utils.js"],"names":["utils","require","describe","it","fn","join","clean","should","equal","stringify","Buffer","Date","toISOString","date","toString","eql","NaN","Infinity","expected","str","int","float","boolean","nil","undef","undefined","regex","func","infi","nan","zero","buffer","array","empArr","matrix","object","a","b","canObj","c","empObj","circular","actual","travis","name","age","travis2","whoami","push","regexp","RegExp","regExpObj","regexpString","number","numberObj","numberString","booleanObj","booleanString","string","stringObj","JSON","nullValue","nullObj","nullString","arrayObj","arrayString","map","replace","fnObj","fnString","foo","bar","baz","quux","herp","Object","create","type","global","prototype","beforeEach","afterEach","fs","path","existsSync","writeFileSync","symlinkSync","lookupFiles","containEql","and","have","lengthOf","be","true","renameSync","false","forEach","unlinkSync","ignored"],"mappings":"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","file":"packages/practicalmeteor:mocha/test/acceptance/utils.js.map","sourcesContent":["var utils = require('../../lib/utils');\n\ndescribe('lib/utils', function () {\n  describe('clean', function () {\n    it(\"should format a single line test function\", function () {\n      var fn = [\n        \"function () {\"\n        , \"  var a = 1;\"\n        , \"}\"\n      ].join(\"\\n\");\n      utils.clean(fn).should.equal(\"var a = 1;\");\n    });\n\n    it(\"should format a multi line test indented with spaces\", function () {\n      // and no new lines after curly braces, shouldn't matter\n      var fn = [\n        \"function(){  var a = 1;\"\n        , \"    var b = 2;\" // this one has more spaces\n        , \"  var c = 3;  }\"\n      ].join(\"\\n\");\n      utils.clean(fn).should.equal(\"var a = 1;\\n  var b = 2;\\nvar c = 3;\");\n    });\n\n    it(\"should format a multi line test indented with tabs\", function () {\n      var fn = [\n        \"function (arg1, arg2)   {\"\n        , \"\\tif (true) {\"\n        , \"\\t\\tvar a = 1;\"\n        , \"\\t}\"\n        , \"}\"\n      ].join(\"\\n\");\n      utils.clean(fn).should.equal(\"if (true) {\\n\\tvar a = 1;\\n}\");\n    });\n\n    it(\"should format functions saved in windows style - spaces\", function () {\n      var fn = [\n        \"function (one) {\"\n        , \"   do {\"\n        , '    \"nothing\";'\n        , \"   } while (false);\"\n        , ' }'\n      ].join(\"\\r\\n\");\n      utils.clean(fn).should.equal('do {\\n \"nothing\";\\n} while (false);');\n    });\n\n    it(\"should format functions saved in windows style - tabs\", function () {\n      var fn = [\n        \"function ( )   {\"\n        , \"\\tif (false) {\"\n        , \"\\t\\tvar json = {\"\n        , '\\t\\t\\tone : 1'\n        , '\\t\\t};'\n        , \"\\t}\"\n        , \"}\"\n      ].join(\"\\r\\n\");\n      utils.clean(fn).should.equal(\"if (false) {\\n\\tvar json = {\\n\\t\\tone : 1\\n\\t};\\n}\");\n    });\n\n    it(\"should format es6 arrow functions\", function () {\n      var fn = [\n        \"() => {\",\n        \"  var a = 1;\",\n        \"}\"\n      ].join(\"\\n\");\n      utils.clean(fn).should.equal(\"var a = 1;\");\n    });\n\n    it(\"should format es6 arrow functions with implicit return\", function () {\n      var fn = \"() => foo()\";\n      utils.clean(fn).should.equal(\"foo()\");\n    });\n  });\n\n  describe('stringify', function(){\n\n    var stringify = utils.stringify;\n\n    it('should return Buffer with .toJSON representation', function() {\n      stringify(new Buffer([0x01])).should.equal('[\\n  1\\n]');\n      stringify(new Buffer([0x01, 0x02])).should.equal('[\\n  1\\n  2\\n]');\n\n      stringify(new Buffer('ABCD')).should.equal('[\\n  65\\n  66\\n  67\\n  68\\n]');\n    });\n\n    it('should return Date object with .toISOString() + string prefix', function() {\n      stringify(new Date(0)).should.equal('[Date: ' + new Date(0).toISOString() + ']');\n\n      var date = new Date(); // now\n      stringify(date).should.equal('[Date: ' + date.toISOString() + ']');\n    });\n\n    it('should return invalid Date object with .toString() + string prefix', function() {\n      stringify(new Date('')).should.equal('[Date: ' + new Date('').toString() + ']');\n    });\n\n    describe('#Number', function() {\n      it('should show the handle -0 situations', function() {\n        stringify(-0).should.eql('-0');\n        stringify(0).should.eql('0');\n        stringify('-0').should.eql('\"-0\"');\n      });\n\n      it('should work well with `NaN` and `Infinity`', function() {\n        stringify(NaN).should.equal('NaN');\n        stringify(Infinity).should.equal('Infinity');\n        stringify(-Infinity).should.equal('-Infinity');\n      });\n\n      it('floats and ints', function() {\n        stringify(1).should.equal('1');\n        stringify(1.2).should.equal('1.2');\n        stringify(1e9).should.equal('1000000000');\n      });\n    });\n\n    describe('canonicalize example', function() {\n      it('should represent the actual full result', function() {\n        var expected = {\n          str: 'string',\n          int: 90,\n          float: 9.99,\n          boolean: false,\n          nil: null,\n          undef: undefined,\n          regex: /^[a-z|A-Z]/,\n          date: new Date(0),\n          func: function() {},\n          infi: Infinity,\n          nan: NaN,\n          zero: -0,\n          buffer: new Buffer([0x01, 0x02]),\n          array: [1,2,3],\n          empArr: [],\n          matrix: [[1], [2,3,4] ],\n          object: { a: 1, b: 2 },\n          canObj: { a: { b: 1, c: 2 }, b: {} },\n          empObj: {}\n        };\n        expected.circular = expected; // Make `Circular` situation\n        var actual = ['{'\n          , '  \"array\": ['\n          , '    1'\n          , '    2'\n          , '    3'\n          , '  ]'\n          , '  \"boolean\": false'\n          , '  \"buffer\": [Buffer: ['\n          , '    1'\n          , '    2'\n          , '  ]]'\n          , '  \"canObj\": {'\n          , '    \"a\": {'\n          , '      \"b\": 1'\n          , '      \"c\": 2'\n          , '    }'\n          , '    \"b\": {}'\n          , '  }'\n          , '  \"circular\": [Circular]'\n          , '  \"date\": [Date: 1970-01-01T00:00:00.000Z]'\n          , '  \"empArr\": []'\n          , '  \"empObj\": {}'\n          , '  \"float\": 9.99'\n          , '  \"func\": [Function]'\n          , '  \"infi\": Infinity'\n          , '  \"int\": 90'\n          , '  \"matrix\": ['\n          , '    ['\n          , '      1'\n          , '    ]'\n          , '    ['\n          , '      2'\n          , '      3'\n          , '      4'\n          , '    ]'\n          , '  ]'\n          , '  \"nan\": NaN'\n          , '  \"nil\": [null]'\n          , '  \"object\": {'\n          , '    \"a\": 1'\n          , '    \"b\": 2'\n          , '  }'\n          , '  \"regex\": /^[a-z|A-Z]/'\n          , '  \"str\": \"string\"'\n          , '  \"undef\": [undefined]'\n          , '  \"zero\": -0'\n          , '}'].join('\\n');\n        stringify(expected).should.equal(actual);\n      });\n    });\n\n    it('should canonicalize the object', function(){\n      var travis = { name: 'travis', age: 24 };\n      var travis2 = { age: 24, name: 'travis' };\n\n      stringify(travis).should.equal(stringify(travis2));\n    });\n\n    it('should handle circular structures in objects', function(){\n      var travis = { name: 'travis' };\n      travis.whoami = travis;\n\n      stringify(travis).should.equal('{\\n  \"name\": \"travis\"\\n  \"whoami\": [Circular]\\n}');\n    });\n\n    it('should handle circular structures in arrays', function(){\n      var travis = ['travis'];\n      travis.push(travis);\n\n      stringify(travis).should.equal('[\\n  \"travis\"\\n  [Circular]\\n]');\n    });\n\n    it('should handle circular structures in functions', function(){\n      var travis = function () {};\n      travis.fn = travis;\n\n      stringify(travis).should.equal('{\\n  \"fn\": [Circular]\\n}');\n    });\n\n\n    it('should handle various non-undefined, non-null, non-object, non-array, non-date, and non-function values', function () {\n      var regexp = new RegExp(\"(?:)\"),\n        regExpObj = { regexp: regexp },\n        regexpString = '/(?:)/';\n\n      stringify(regExpObj).should.equal('{\\n  \"regexp\": ' + regexpString + '\\n}');\n      stringify(regexp).should.equal(regexpString);\n\n      var number = 1,\n        numberObj = { number: number },\n        numberString = '1';\n\n      stringify(numberObj).should.equal('{\\n  \"number\": ' + number + '\\n}');\n      stringify(number).should.equal(numberString);\n\n      var boolean = false,\n        booleanObj = { boolean: boolean },\n        booleanString = 'false';\n\n      stringify(booleanObj).should.equal('{\\n  \"boolean\": ' + boolean + '\\n}');\n      stringify(boolean).should.equal(booleanString);\n\n      var string = 'sneepy',\n        stringObj = { string: string };\n\n      stringify(stringObj).should.equal('{\\n  \"string\": \"' + string + '\"\\n}');\n      stringify(string).should.equal(JSON.stringify(string));\n\n      var nullValue = null,\n        nullObj = { 'null': null },\n        nullString = '[null]';\n\n      stringify(nullObj).should.equal('{\\n  \"null\": [null]\\n}');\n      stringify(nullValue).should.equal(nullString);\n    });\n\n    it('should handle arrays', function () {\n      var array = ['dave', 'dave', 'dave', 'dave'],\n        arrayObj = {array: array},\n        arrayString = array.map(function () {\n          return '    \"dave\"';\n        }).join('\\n');\n\n      stringify(arrayObj).should.equal('{\\n  \"array\": [\\n' + arrayString + '\\n  ]\\n}');\n      stringify(array).should.equal('[' + arrayString.replace(/\\s+/g, '\\n  ') + '\\n]');\n    });\n\n    it('should handle functions', function () {\n      var fn = function() {},\n        fnObj = {fn: fn},\n        fnString = '[Function]';\n\n      stringify(fnObj).should.equal('{\\n  \"fn\": ' + fnString + '\\n}');\n      stringify(fn).should.equal('[Function]');\n    });\n\n    it('should handle empty objects', function () {\n      stringify({}).should.equal('{}');\n      stringify({foo: {}}).should.equal('{\\n  \"foo\": {}\\n}');\n    });\n\n    it('should handle empty arrays', function () {\n      stringify([]).should.equal('[]');\n      stringify({foo: []}).should.equal('{\\n  \"foo\": []\\n}');\n    });\n\n    it('should handle non-empty arrays', function () {\n      stringify(['a', 'b', 'c']).should.equal('[\\n  \"a\"\\n  \"b\"\\n  \"c\"\\n]')\n    });\n\n    it('should handle empty functions (with no properties)', function () {\n      stringify(function(){}).should.equal('[Function]');\n      stringify({foo: function() {}}).should.equal('{\\n  \"foo\": [Function]\\n}');\n      stringify({foo: function() {}, bar: 'baz'}).should.equal('{\\n  \"bar\": \"baz\"\\n  \"foo\": [Function]\\n}');\n    });\n\n    it('should handle functions w/ properties', function () {\n      var fn = function(){};\n      fn.bar = 'baz';\n      stringify(fn).should.equal('{\\n  \"bar\": \"baz\"\\n}');\n      stringify({foo: fn}).should.equal('{\\n  \"foo\": {\\n    \"bar\": \"baz\"\\n  }\\n}');\n    });\n\n    it('should handle undefined values', function () {\n      stringify({foo: undefined}).should.equal('{\\n  \"foo\": [undefined]\\n}');\n      stringify({foo: 'bar', baz: undefined}).should.equal('{\\n  \"baz\": [undefined]\\n  \"foo\": \"bar\"\\n}');\n      stringify().should.equal('[undefined]');\n    });\n\n    it('should recurse', function () {\n      stringify({foo: {bar: {baz: {quux: {herp: 'derp'}}}}}).should.equal('{\\n  \"foo\": {\\n    \"bar\": {\\n      \"baz\": {\\n        \"quux\": {\\n          \"herp\": \"derp\"\\n        }\\n      }\\n    }\\n  }\\n}');\n    });\n\n    it('might get confusing', function () {\n      stringify(null).should.equal('[null]');\n    });\n\n    it('should not freak out if it sees a primitive twice', function () {\n      stringify({foo: null, bar: null}).should.equal('{\\n  \"bar\": [null]\\n  \"foo\": [null]\\n}');\n      stringify({foo: 1, bar: 1}).should.equal('{\\n  \"bar\": 1\\n  \"foo\": 1\\n}');\n    });\n\n    it('should stringify dates', function () {\n      var date = new Date(0);\n      stringify(date).should.equal('[Date: 1970-01-01T00:00:00.000Z]');\n      stringify({date: date}).should.equal('{\\n  \"date\": [Date: 1970-01-01T00:00:00.000Z]\\n}');\n    });\n\n    it('should handle object without an Object prototype', function () {\n      var a = Object.create(null);\n      a.foo = 1;\n\n      stringify(a).should.equal('{\\n  \"foo\": 1\\n}');\n    });\n  });\n\n  describe('type', function () {\n    var type = utils.type;\n    it('should recognize various types', function () {\n      type({}).should.equal('object');\n      type([]).should.equal('array');\n      type(1).should.equal('number');\n      type(Infinity).should.equal('number');\n      type(null).should.equal('null');\n      type(undefined).should.equal('undefined');\n      type(new Date()).should.equal('date');\n      type(/foo/).should.equal('regexp');\n      type('type').should.equal('string');\n      type(global).should.equal('global');\n      type(true).should.equal('boolean');\n    });\n\n    describe('when toString on null or undefined stringifies window', function () {\n      var toString = Object.prototype.toString;\n\n      beforeEach(function () {\n        // some JS engines such as PhantomJS 1.x exhibit this behavior\n        Object.prototype.toString = function () {\n          return '[object DOMWindow]';\n        };\n      });\n\n      it('should recognize null and undefined', function () {\n        type(null).should.equal('null');\n        type(undefined).should.equal('undefined');\n      });\n\n      afterEach(function () {\n        Object.prototype.toString = toString;\n      });\n    });\n  });\n\n  describe('lookupFiles', function () {\n    var fs = require('fs'),\n      path = require('path'),\n      existsSync = fs.existsSync || path.existsSync;\n\n    beforeEach(function () {\n      fs.writeFileSync('/tmp/mocha-utils.js', 'yippy skippy ying yang yow');\n      fs.symlinkSync('/tmp/mocha-utils.js', '/tmp/mocha-utils-link.js');\n    });\n\n    it('should not choke on symlinks', function () {\n      utils.lookupFiles('/tmp', ['js'], false)\n        .should.containEql('/tmp/mocha-utils-link.js')\n        .and.containEql('/tmp/mocha-utils.js')\n        .and.have.lengthOf(2);\n      existsSync('/tmp/mocha-utils-link.js').should.be.true();\n      fs.renameSync('/tmp/mocha-utils.js', '/tmp/bob');\n      existsSync('/tmp/mocha-utils-link.js').should.be.false();\n      utils.lookupFiles('/tmp', ['js'], false).should.eql([]);\n    });\n\n    afterEach(function () {\n      ['/tmp/mocha-utils.js', '/tmp/mocha-utils-link.js', '/tmp/bob'].forEach(function (path) {\n        try {\n          fs.unlinkSync(path);\n        }\n        catch (ignored) {}\n      });\n    });\n  });\n});\n"]},"hash":"682050c9c28e38727d4e27866c4a868693417029"}
